"""
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
"""
from telegram import Update
from telegram.ext import ContextTypes
from handlers.keyboards import (
    get_main_menu_keyboard,
    get_topics_keyboard,
    get_faq_keyboard,
    get_inline_menu
)
from utils.logger import logger


async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é"""
    text = update.message.text
    user = update.effective_user

    logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user.id} –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É: {text}")

    # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    if text == "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
        await handle_main_menu(update, context)

    # –ü–æ–º–æ—â—å
    elif text == "‚ùì –ü–æ–º–æ—â—å":
        await handle_help(update, context)

    # –¢–∞—Ä–∏—Ñ—ã
    elif text == "üí∞ –¢–∞—Ä–∏—Ñ—ã":
        await handle_pricing(update, context)

    # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
    elif text == "üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π":
        await handle_knowledge(update, context)

    # –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
    elif text == "üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã":
        await handle_faq(update, context)

    # –û –±–æ—Ç–µ
    elif text == "‚ÑπÔ∏è –û –±–æ—Ç–µ":
        await handle_about(update, context)

    # –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
    elif text == "üîÑ –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥":
        await handle_reset(update, context)


async def handle_main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
    message = (
        "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å.\n\n"
        "üí° **–°–æ–≤–µ—Ç:** –§–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n"
        "‚Ä¢ \"–ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–º?\"\n"
        "‚Ä¢ \"–ö–∞–∫–æ–π –ª–∏–º–∏—Ç –¥–æ—Ö–æ–¥–∞ –¥–ª—è –ù–ü–î?\"\n"
        "‚Ä¢ \"–ù—É–∂–Ω–æ –ª–∏ –ø–ª–∞—Ç–∏—Ç—å –≤–∑–Ω–æ—Å—ã –≤ –ü–§–†?\""
    )

    await update.message.reply_text(
        message,
        parse_mode='Markdown',
        reply_markup=get_inline_menu()
    )


async def handle_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é"""
    message = (
        "‚ùì **–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º?**\n\n"
        "1Ô∏è‚É£ **–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã —Ç–µ–∫—Å—Ç–æ–º**\n"
        "–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n"
        "_\"–ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å?\"_\n\n"
        "2Ô∏è‚É£ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é**\n"
        "‚Ä¢ üí∞ –¢–∞—Ä–∏—Ñ—ã ‚Äî —É–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å\n"
        "‚Ä¢ üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π ‚Äî –≤—Å–µ —Ç–µ–º—ã\n"
        "‚Ä¢ üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã ‚Äî —Ç–æ–ø-5 FAQ\n\n"
        "3Ô∏è‚É£ **–ü–æ–ª—É—á–∞–π—Ç–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã**\n"
        "–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPT-4 –∏ –±–∞–∑—É –∏–∑ 15 —Å—Ç–∞—Ç–µ–π –æ –ù–ü–î.\n\n"
        "‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã:** FAQ –æ—Ç–≤–µ—á–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã.\n"
        "üß† **–£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:** RAG –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π."
    )

    await update.message.reply_text(message, parse_mode='Markdown')


async def handle_pricing(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö"""
    message = (
        "üí∞ **–¢–∞—Ä–∏—Ñ—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å**\n\n"
        "üéâ **–ë–ï–°–ü–õ–ê–¢–ù–û (–ø–æ–∫–∞ –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏!):**\n"
        "‚Ä¢ ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤\n"
        "‚Ä¢ ‚úÖ –î–æ—Å—Ç—É–ø –∫ GPT-4\n"
        "‚Ä¢ ‚úÖ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏–∑ 15 —Å—Ç–∞—Ç–µ–π\n"
        "‚Ä¢ ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ FAQ\n\n"
        "üìä **–ë—É–¥—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã (–ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è):**\n\n"
        "**FREE:**\n"
        "‚Ä¢ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å\n"
        "‚Ä¢ –ë–∞–∑–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã\n"
        "üíµ 0‚ÇΩ/–º–µ—Å—è—Ü\n\n"
        "**PRO:**\n"
        "‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n"
        "‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n"
        "‚Ä¢ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π\n"
        "üíµ 299‚ÇΩ/–º–µ—Å—è—Ü\n\n"
        "üí° **–ü–æ–ª—å–∑—É–π—Ç–µ—Å—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –ø–æ–∫–∞ –∏–¥—ë—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!**"
    )

    await update.message.reply_text(message, parse_mode='Markdown')


async def handle_knowledge(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π - —Ç–µ–º—ã"""
    message = (
        "üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏**\n\n"
        "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –≤–∞—Å —Ç–µ–º—É:"
    )

    await update.message.reply_text(
        message,
        parse_mode='Markdown',
        reply_markup=get_topics_keyboard()
    )


async def handle_faq(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
    message = (
        "üìä **–¢–æ–ø-5 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤**\n\n"
        "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å –≤–æ–ø—Ä–æ—Å:"
    )

    await update.message.reply_text(
        message,
        parse_mode='Markdown',
        reply_markup=get_faq_keyboard()
    )


async def handle_about(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û –±–æ—Ç–µ"""
    message = (
        "‚ÑπÔ∏è **–û –ø—Ä–æ–µ–∫—Ç–µ**\n\n"
        "ü§ñ **AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏ (–ù–ü–î)**\n\n"
        "üìå **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**\n"
        "‚Ä¢ GPT-4 –æ—Ç OpenAI\n"
        "‚Ä¢ RAG (Retrieval-Augmented Generation)\n"
        "‚Ä¢ 15 —Å—Ç–∞—Ç–µ–π –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π\n"
        "‚Ä¢ 14 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ FAQ\n\n"
        "üí° **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**\n"
        "‚Ä¢ –≠–∫–æ–Ω–æ–º–∏—è 85% —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ FAQ\n"
        "‚Ä¢ –¢–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤\n"
        "‚Ä¢ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n\n"
        "üë®‚Äçüíª **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** @YourUsername\n"
        "üìÖ **–°–æ–∑–¥–∞–Ω:** –§–µ–≤—Ä–∞–ª—å 2026\n"
        "üîó **GitHub:** [AIconsultant-ProNPD](https://github.com/igormikt/AIconsultant-ProNPD)\n\n"
        "üìß **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** your-email@example.com"
    )

    await update.message.reply_text(message, parse_mode='Markdown')


async def handle_reset(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–°–±—Ä–æ—Å –¥–∏–∞–ª–æ–≥–∞"""
    # –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    context.user_data.clear()

    message = (
        "üîÑ **–î–∏–∞–ª–æ–≥ —Å–±—Ä–æ—à–µ–Ω!**\n\n"
        "–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—á–∏—â–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä!"
    )

    await update.message.reply_text(
        message,
        parse_mode='Markdown',
        reply_markup=get_main_menu_keyboard()
    )

    logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {update.effective_user.id} —Å–±—Ä–æ—Å–∏–ª –¥–∏–∞–ª–æ–≥")


async def callback_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ inline-–∫–Ω–æ–ø–æ–∫"""
    query = update.callback_query
    await query.answer()

    callback_data = query.data

    # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    if callback_data == "main_menu":
        message = (
            "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n"
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
        )
        await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())

    # –¢–∞—Ä–∏—Ñ—ã
    elif callback_data == "pricing":
        await handle_pricing_inline(query)

    # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
    elif callback_data == "knowledge":
        message = "üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É:"
        await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_topics_keyboard())

    # FAQ
    elif callback_data == "faq":
        message = "üìä **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å:"
        await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_faq_keyboard())

    # –û –±–æ—Ç–µ
    elif callback_data == "about":
        await handle_about_inline(query)

    # –¢–µ–º—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
    elif callback_data.startswith("topic_"):
        await handle_topic(query, callback_data)

    # FAQ –≤–æ–ø—Ä–æ—Å—ã
    elif callback_data.startswith("faq_"):
        await handle_faq_question(query, callback_data)


async def handle_pricing_inline(query):
    """–¢–∞—Ä–∏—Ñ—ã (inline)"""
    message = (
        "üí∞ **–¢–∞—Ä–∏—Ñ—ã**\n\n"
        "üéâ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏!\n\n"
        "‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n"
        "‚Ä¢ –î–æ—Å—Ç—É–ø –∫ GPT-4\n"
        "‚Ä¢ –ë–∞–∑–∞ –∏–∑ 15 —Å—Ç–∞—Ç–µ–π"
    )
    await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())


async def handle_about_inline(query):
    """–û –±–æ—Ç–µ (inline)"""
    message = (
        "‚ÑπÔ∏è **–û –±–æ—Ç–µ**\n\n"
        "AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å GPT-4 –∏ RAG.\n\n"
        "üìÖ –°–æ–∑–¥–∞–Ω: –§–µ–≤—Ä–∞–ª—å 2026\n"
        "üîó GitHub: AIconsultant-ProNPD"
    )
    await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())


async def handle_topic(query, callback_data):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã"""
    topics = {
        "topic_registration": "üìù **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏**\n\n–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ù–ü–î.",
        "topic_taxes": "üí∏ **–ù–∞–ª–æ–≥–∏ –∏ –ª–∏–º–∏—Ç—ã**\n\n–£–∑–Ω–∞–π—Ç–µ –æ –Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö –∏ –ª–∏–º–∏—Ç–∞—Ö –¥–æ—Ö–æ–¥–∞.",
        "topic_reporting": "üìä **–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å**\n\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞—Ö.",
        "topic_closing": "‚ùå **–ó–∞–∫—Ä—ã—Ç–∏–µ**\n\n–ö–∞–∫ –∑–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ."
    }

    message = topics.get(callback_data, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É.")
    await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_topics_keyboard())


async def handle_faq_question(query, callback_data):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ FAQ –≤–æ–ø—Ä–æ—Å–æ–≤"""

    # –°–ª–æ–≤–∞—Ä—å —Å –≥–æ—Ç–æ–≤—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏ –Ω–∞ FAQ
    faq_answers = {
        "faq_registration": (
            "üìù **–ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–º?**\n\n"
            "**–®–∞–≥ 1:** –°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **\"–ú–æ–π –Ω–∞–ª–æ–≥\"**\n"
            "‚Ä¢ iOS: App Store\n"
            "‚Ä¢ Android: Google Play\n\n"
            "**–®–∞–≥ 2:** –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –æ–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤:\n"
            "‚Ä¢ –ü–∞—Å–ø–æ—Ä—Ç + —Ñ–æ—Ç–æ (–¥–ª—è –≥—Ä–∞–∂–¥–∞–Ω –†–§)\n"
            "‚Ä¢ –ò–ù–ù + –ø–∞—Ä–æ–ª—å –æ—Ç –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ –§–ù–°\n"
            "‚Ä¢ –ß–µ—Ä–µ–∑ –ì–æ—Å—É—Å–ª—É–≥–∏\n\n"
            "**–®–∞–≥ 3:** –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:\n"
            "‚Ä¢ –§–ò–û\n"
            "‚Ä¢ –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞\n"
            "‚Ä¢ Email\n\n"
            "**–®–∞–≥ 4:** –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é\n\n"
            "‚è±Ô∏è **–í—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:** 5-10 –º–∏–Ω—É—Ç\n"
            "üí∞ **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ë–µ—Å–ø–ª–∞—Ç–Ω–æ\n"
            "üìÖ **–°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–µ–Ω:** –°—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏"
        ),

        "faq_limit": (
            "üí∞ **–ö–∞–∫–æ–π –ª–∏–º–∏—Ç –¥–æ—Ö–æ–¥–∞ –¥–ª—è —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã—Ö?**\n\n"
            "**–ì–æ–¥–æ–≤–æ–π –ª–∏–º–∏—Ç:** 2,4 –º–ª–Ω —Ä—É–±–ª–µ–π\n\n"
            "üìä **–ß—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤ –ª–∏–º–∏—Ç:**\n"
            "‚Ä¢ –í—Å–µ –¥–æ—Ö–æ–¥—ã –æ—Ç —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏\n"
            "‚Ä¢ –î–æ—Ö–æ–¥—ã –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ç–æ–≤–∞—Ä–æ–≤\n"
            "‚Ä¢ –î–æ—Ö–æ–¥—ã –æ—Ç –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥\n\n"
            "‚ùå **–ß—Ç–æ –ù–ï –≤—Ö–æ–¥–∏—Ç:**\n"
            "‚Ä¢ –ó–∞—Ä–ø–ª–∞—Ç–∞ –ø–æ —Ç—Ä—É–¥–æ–≤–æ–º—É –¥–æ–≥–æ–≤–æ—Ä—É\n"
            "‚Ä¢ –î–æ—Ö–æ–¥—ã –æ—Ç –ø—Ä–æ–¥–∞–∂–∏ –∏–º—É—â–µ—Å—Ç–≤–∞\n"
            "‚Ä¢ –î–æ—Ö–æ–¥—ã –æ—Ç –∞—Ä–µ–Ω–¥—ã –∫–≤–∞—Ä—Ç–∏—Ä—ã (–µ—Å–ª–∏ –Ω–µ —á–µ—Ä–µ–∑ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å)\n\n"
            "‚ö†Ô∏è **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞:**\n"
            "‚Ä¢ –¢–µ—Ä—è–µ—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ\n"
            "‚Ä¢ –ù—É–∂–Ω–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –ò–ü –∏–ª–∏ –û–û–û\n"
            "‚Ä¢ –ü–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥–∏ –ø–æ –¥—Ä—É–≥–∏–º —Å—Ç–∞–≤–∫–∞–º\n\n"
            "üìÖ **–õ–∏–º–∏—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è:** –° 1 —è–Ω–≤–∞—Ä—è –ø–æ 31 –¥–µ–∫–∞–±—Ä—è —Ç–µ–∫—É—â–µ–≥–æ –≥–æ–¥–∞"
        ),

        "faq_tax_payment": (
            "üìä **–ö–∞–∫ –ø–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–º—É?**\n\n"
            "**–ù–∞–ª–æ–≥–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏:**\n"
            "‚Ä¢ 4% ‚Äî –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∏–∑–ª–∏—Ü–∞–º–∏\n"
            "‚Ä¢ 6% ‚Äî –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ –∏ –ò–ü\n\n"
            "üí≥ **–ö–∞–∫ –ø–ª–∞—Ç–∏—Ç—å:**\n\n"
            "**1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç:**\n"
            "‚Ä¢ –ù–∞–ª–æ–≥ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ \"–ú–æ–π –Ω–∞–ª–æ–≥\"\n"
            "‚Ä¢ –ù–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±–∏—Ç—ã—Ö —á–µ–∫–æ–≤ –∑–∞ –º–µ—Å—è—Ü\n\n"
            "**2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**\n"
            "‚Ä¢ –î–æ 12 —á–∏—Å–ª–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –º–µ—Å—è—Ü–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n"
            "‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—É–º–º—É –∫ –æ–ø–ª–∞—Ç–µ\n\n"
            "**3. –û–ø–ª–∞—Ç–∞:**\n"
            "‚Ä¢ –°—Ä–æ–∫: –¥–æ 28 —á–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞\n"
            "‚Ä¢ –°–ø–æ—Å–æ–±—ã: –∫–∞—Ä—Ç–∞, —Å—á—ë—Ç, QR-–∫–æ–¥\n"
            "‚Ä¢ –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–ø–ª–∞—Ç—ë–∂\n\n"
            "üìÖ **–ü—Ä–∏–º–µ—Ä:**\n"
            "‚Ä¢ –Ø–Ω–≤–∞—Ä—å: —Ä–∞–±–æ—Ç–∞–ª–∏ –∏ –ø–æ–ª—É—á–∞–ª–∏ –¥–æ—Ö–æ–¥—ã\n"
            "‚Ä¢ –î–æ 12 —Ñ–µ–≤—Ä–∞–ª—è: –ø—Ä–∏—à–ª–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n"
            "‚Ä¢ –î–æ 28 —Ñ–µ–≤—Ä–∞–ª—è: –æ–ø–ª–∞—Ç–∏–ª–∏ –Ω–∞–ª–æ–≥\n\n"
            "‚ö†Ô∏è **–ï—Å–ª–∏ –¥–æ—Ö–æ–¥ –º–µ–Ω—å—à–µ 100‚ÇΩ –≤ –º–µ—Å—è—Ü:**\n"
            "–ù–∞–ª–æ–≥ –Ω–µ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è –∏ –Ω–µ –ø–ª–∞—Ç–∏—Ç—Å—è"
        ),

        "faq_b2b": (
            "üè¶ **–ú–æ–≥—É –ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏?**\n\n"
            "‚úÖ **–î–ê, –º–æ–∂–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —é—Ä–ª–∏—Ü–∞–º–∏ –∏ –ò–ü!**\n\n"
            "üìã **–£—Å–ª–æ–≤–∏—è:**\n"
            "‚Ä¢ –ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞: **6%** (–≤–º–µ—Å—Ç–æ 4% —Å —Ñ–∏–∑–ª–∏—Ü–∞–º–∏)\n"
            "‚Ä¢ –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–±–∏–≤–∞—Ç—å —á–µ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n"
            "‚Ä¢ –ú–æ–∂–Ω–æ –∑–∞–∫–ª—é—á–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä—ã\n\n"
            "‚ùå **–ó–∞–ø—Ä–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –±—ã–≤—à–∏–º —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–º:**\n"
            "‚Ä¢ –ù–µ–ª—å–∑—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–º–ø–∞–Ω–∏–µ–π, –≥–¥–µ –±—ã–ª–∏ –≤ —à—Ç–∞—Ç–µ\n"
            "‚Ä¢ –ú–∏–Ω–∏–º—É–º 2 –≥–æ–¥–∞ –ø–æ—Å–ª–µ —É–≤–æ–ª—å–Ω–µ–Ω–∏—è\n"
            "‚Ä¢ –ò–Ω–∞—á–µ —ç—Ç–æ –Ω–∞—Ä—É—à–µ–Ω–∏–µ (—à—Ç—Ä–∞—Ñ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏)\n\n"
            "‚úÖ **–ú–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**\n"
            "‚Ä¢ –° –ª—é–±—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ (–∫—Ä–æ–º–µ –±—ã–≤—à–µ–≥–æ —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª—è)\n"
            "‚Ä¢ –° –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–º–ø–∞–Ω–∏—è–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ\n"
            "‚Ä¢ –ü–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º –ì–ü–• –∏–ª–∏ –±–µ–∑ –Ω–∏—Ö\n\n"
            "üìÑ **–î–æ–∫—É–º–µ–Ω—Ç—ã:**\n"
            "‚Ä¢ –ß–µ–∫ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è \"–ú–æ–π –Ω–∞–ª–æ–≥\"\n"
            "‚Ä¢ –ú–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∞–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç\n\n"
            "üí° **–°–æ–≤–µ—Ç:** –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –≤ —á–µ–∫–µ \"–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è\" –∏–ª–∏ \"–ò–ü\", —á—Ç–æ–±—ã –ø—Ä–∏–º–µ–Ω—è–ª–∞—Å—å —Å—Ç–∞–≤–∫–∞ 6%"
        ),

        "faq_close": (
            "‚ùå **–ö–∞–∫ –∑–∞–∫—Ä—ã—Ç—å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å?**\n\n"
            "üì± **–°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ \"–ú–æ–π –Ω–∞–ª–æ–≥\"**\n\n"
            "1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n"
            "2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **\"–ü—Ä–æ—Ñ–∏–ª—å\"**\n"
            "3. –ù–∞–∂–º–∏—Ç–µ **\"–°–Ω—è—Ç—å—Å—è —Å —É—á—ë—Ç–∞ –ù–ü–î\"**\n"
            "4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ\n\n"
            "üåê **–°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –Ω–∞ —Å–∞–π—Ç–µ –§–ù–°**\n\n"
            "1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ nalog.gov.ru\n"
            "2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å\n"
            "3. –†–∞–∑–¥–µ–ª **\"–°–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å\"**\n"
            "4. **\"–°–Ω—è—Ç—å—Å—è —Å —É—á—ë—Ç–∞\"**\n\n"
            "‚è±Ô∏è **–°—Ä–æ–∫–∏:**\n"
            "‚Ä¢ –°–Ω—è—Ç–∏–µ —Å —É—á—ë—Ç–∞: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ\n"
            "‚Ä¢ –°—Ç–∞—Ç—É—Å –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É\n\n"
            "üí∞ **–û–ø–ª–∞—Ç–∞ –Ω–∞–ª–æ–≥–æ–≤:**\n"
            "‚Ä¢ –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –æ–ø–ª–∞—Ç–∏—Ç–µ –≤—Å–µ –¥–æ–ª–≥–∏\n"
            "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏\n\n"
            "üîÑ **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**\n"
            "‚Ä¢ –ú–æ–∂–Ω–æ —Å–Ω–æ–≤–∞ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç\n"
            "‚Ä¢ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ —Ç–∞ –∂–µ, —á—Ç–æ –∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏\n\n"
            "‚ö†Ô∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ:**\n"
            "‚Ä¢ –ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ 2,4 –º–ª–Ω‚ÇΩ\n"
            "‚Ä¢ –ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π –ù–ü–î\n\n"
            "üìß **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**\n"
            "‚Ä¢ –ü—Ä–∏–¥—ë—Ç SMS –∏ email –æ —Å–Ω—è—Ç–∏–∏ —Å —É—á—ë—Ç–∞"
        )
    }

    # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –∏–∑ —Å–ª–æ–≤–∞—Ä—è
    message = faq_answers.get(
        callback_data,
        "‚ùì –û—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ."
    )

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É FAQ
    await query.edit_message_text(
        message,
        parse_mode='Markdown',
        reply_markup=get_faq_keyboard()
    )

# """
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏
# """
# from telegram import Update
# from telegram.ext import ContextTypes
# from handlers.keyboards import (
#     get_main_menu_keyboard,
#     get_topics_keyboard,
#     get_faq_keyboard,
#     get_inline_menu
# )
# from utils.logger import logger
#
#
# async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é"""
#     text = update.message.text
#     user = update.effective_user
#
#     logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user.id} –Ω–∞–∂–∞–ª –∫–Ω–æ–ø–∫—É: {text}")
#
#     # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
#     if text == "üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
#         await handle_main_menu(update, context)
#
#     # –ü–æ–º–æ—â—å
#     elif text == "‚ùì –ü–æ–º–æ—â—å":
#         await handle_help(update, context)
#
#     # –¢–∞—Ä–∏—Ñ—ã
#     elif text == "üí∞ –¢–∞—Ä–∏—Ñ—ã":
#         await handle_pricing(update, context)
#
#     # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
#     elif text == "üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π":
#         await handle_knowledge(update, context)
#
#     # –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
#     elif text == "üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã":
#         await handle_faq(update, context)
#
#     # –û –±–æ—Ç–µ
#     elif text == "‚ÑπÔ∏è –û –±–æ—Ç–µ":
#         await handle_about(update, context)
#
#     # –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥
#     elif text == "üîÑ –ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥":
#         await handle_reset(update, context)
#
#
# async def handle_main_menu(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"""
#     message = (
#         "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n"
#         "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–∑ –º–µ–Ω—é –Ω–∏–∂–µ –∏–ª–∏ –∑–∞–¥–∞–π—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å.\n\n"
#         "üí° **–°–æ–≤–µ—Ç:** –§–æ—Ä–º—É–ª–∏—Ä—É–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n"
#         "‚Ä¢ \"–ö–∞–∫ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–∞–º–æ–∑–∞–Ω—è—Ç—ã–º?\"\n"
#         "‚Ä¢ \"–ö–∞–∫–æ–π –ª–∏–º–∏—Ç –¥–æ—Ö–æ–¥–∞ –¥–ª—è –ù–ü–î?\"\n"
#         "‚Ä¢ \"–ù—É–∂–Ω–æ –ª–∏ –ø–ª–∞—Ç–∏—Ç—å –≤–∑–Ω–æ—Å—ã –≤ –ü–§–†?\""
#     )
#
#     await update.message.reply_text(
#         message,
#         parse_mode='Markdown',
#         reply_markup=get_inline_menu()
#     )
#
#
# async def handle_help(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é"""
#     message = (
#         "‚ùì **–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º?**\n\n"
#         "1Ô∏è‚É£ **–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã —Ç–µ–∫—Å—Ç–æ–º**\n"
#         "–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä:\n"
#         "_\"–ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å?\"_\n\n"
#         "2Ô∏è‚É£ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é**\n"
#         "‚Ä¢ üí∞ –¢–∞—Ä–∏—Ñ—ã ‚Äî —É–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å\n"
#         "‚Ä¢ üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π ‚Äî –≤—Å–µ —Ç–µ–º—ã\n"
#         "‚Ä¢ üìä –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã ‚Äî —Ç–æ–ø-5 FAQ\n\n"
#         "3Ô∏è‚É£ **–ü–æ–ª—É—á–∞–π—Ç–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã**\n"
#         "–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GPT-4 –∏ –±–∞–∑—É –∏–∑ 15 —Å—Ç–∞—Ç–µ–π –æ –ù–ü–î.\n\n"
#         "‚ö° **–ë—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã:** FAQ –æ—Ç–≤–µ—á–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã.\n"
#         "üß† **–£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã:** RAG –∏—â–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π."
#     )
#
#     await update.message.reply_text(message, parse_mode='Markdown')
#
#
# async def handle_pricing(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞—Ä–∏—Ñ–∞—Ö"""
#     message = (
#         "üí∞ **–¢–∞—Ä–∏—Ñ—ã –∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å**\n\n"
#         "üéâ **–ë–ï–°–ü–õ–ê–¢–ù–û (–ø–æ–∫–∞ –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏!):**\n"
#         "‚Ä¢ ‚úÖ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–ø—Ä–æ—Å–æ–≤\n"
#         "‚Ä¢ ‚úÖ –î–æ—Å—Ç—É–ø –∫ GPT-4\n"
#         "‚Ä¢ ‚úÖ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏–∑ 15 —Å—Ç–∞—Ç–µ–π\n"
#         "‚Ä¢ ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ FAQ\n\n"
#         "üìä **–ë—É–¥—É—â–∏–µ —Ç–∞—Ä–∏—Ñ—ã (–ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è):**\n\n"
#         "**FREE:**\n"
#         "‚Ä¢ 10 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å\n"
#         "‚Ä¢ –ë–∞–∑–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã\n"
#         "üíµ 0‚ÇΩ/–º–µ—Å—è—Ü\n\n"
#         "**PRO:**\n"
#         "‚Ä¢ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n"
#         "‚Ä¢ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞\n"
#         "‚Ä¢ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π\n"
#         "üíµ 299‚ÇΩ/–º–µ—Å—è—Ü\n\n"
#         "üí° **–ü–æ–ª—å–∑—É–π—Ç–µ—Å—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –ø–æ–∫–∞ –∏–¥—ë—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!**"
#     )
#
#     await update.message.reply_text(message, parse_mode='Markdown')
#
#
# async def handle_knowledge(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π - —Ç–µ–º—ã"""
#     message = (
#         "üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏**\n\n"
#         "–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –≤–∞—Å —Ç–µ–º—É:"
#     )
#
#     await update.message.reply_text(
#         message,
#         parse_mode='Markdown',
#         reply_markup=get_topics_keyboard()
#     )
#
#
# async def handle_faq(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
#     message = (
#         "üìä **–¢–æ–ø-5 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤**\n\n"
#         "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–π –≤–∞—Å –≤–æ–ø—Ä–æ—Å:"
#     )
#
#     await update.message.reply_text(
#         message,
#         parse_mode='Markdown',
#         reply_markup=get_faq_keyboard()
#     )
#
#
# async def handle_about(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–û –±–æ—Ç–µ"""
#     message = (
#         "‚ÑπÔ∏è **–û –ø—Ä–æ–µ–∫—Ç–µ**\n\n"
#         "ü§ñ **AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç –ø–æ —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏ (–ù–ü–î)**\n\n"
#         "üìå **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**\n"
#         "‚Ä¢ GPT-4 –æ—Ç OpenAI\n"
#         "‚Ä¢ RAG (Retrieval-Augmented Generation)\n"
#         "‚Ä¢ 15 —Å—Ç–∞—Ç–µ–π –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π\n"
#         "‚Ä¢ 14 –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ FAQ\n\n"
#         "üí° **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**\n"
#         "‚Ä¢ –≠–∫–æ–Ω–æ–º–∏—è 85% —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ FAQ\n"
#         "‚Ä¢ –¢–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤\n"
#         "‚Ä¢ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n\n"
#         "üë®‚Äçüíª **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** @YourUsername\n"
#         "üìÖ **–°–æ–∑–¥–∞–Ω:** –§–µ–≤—Ä–∞–ª—å 2026\n"
#         "üîó **GitHub:** [AIconsultant-ProNPD](https://github.com/igormikt/AIconsultant-ProNPD)\n\n"
#         "üìß **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:** your-email@example.com"
#     )
#
#     await update.message.reply_text(message, parse_mode='Markdown')
#
#
# async def handle_reset(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–°–±—Ä–æ—Å –¥–∏–∞–ª–æ–≥–∞"""
#     # –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
#     context.user_data.clear()
#
#     message = (
#         "üîÑ **–î–∏–∞–ª–æ–≥ —Å–±—Ä–æ—à–µ–Ω!**\n\n"
#         "–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ—á–∏—â–µ–Ω–∞. –ú–æ–∂–µ—Ç–µ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä!"
#     )
#
#     await update.message.reply_text(
#         message,
#         parse_mode='Markdown',
#         reply_markup=get_main_menu_keyboard()
#     )
#
#     logger.info(f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {update.effective_user.id} —Å–±—Ä–æ—Å–∏–ª –¥–∏–∞–ª–æ–≥")
#
#
# async def callback_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
#     """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ inline-–∫–Ω–æ–ø–æ–∫"""
#     query = update.callback_query
#     await query.answer()
#
#     callback_data = query.data
#
#     # –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
#     if callback_data == "main_menu":
#         message = (
#             "üè† **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**\n\n"
#             "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:"
#         )
#         await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())
#
#     # –¢–∞—Ä–∏—Ñ—ã
#     elif callback_data == "pricing":
#         await handle_pricing_inline(query)
#
#     # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
#     elif callback_data == "knowledge":
#         message = "üìö **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É:"
#         await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_topics_keyboard())
#
#     # FAQ
#     elif callback_data == "faq":
#         message = "üìä **–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã**\n\n–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–ø—Ä–æ—Å:"
#         await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_faq_keyboard())
#
#     # –û –±–æ—Ç–µ
#     elif callback_data == "about":
#         await handle_about_inline(query)
#
#     # –¢–µ–º—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
#     elif callback_data.startswith("topic_"):
#         await handle_topic(query, callback_data)
#
#     # FAQ –≤–æ–ø—Ä–æ—Å—ã
#     elif callback_data.startswith("faq_"):
#         await handle_faq_question(query, callback_data)
#
#
# async def handle_pricing_inline(query):
#     """–¢–∞—Ä–∏—Ñ—ã (inline)"""
#     message = (
#         "üí∞ **–¢–∞—Ä–∏—Ñ—ã**\n\n"
#         "üéâ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –≤ –±–µ—Ç–∞-–≤–µ—Ä—Å–∏–∏!\n\n"
#         "‚Ä¢ –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n"
#         "‚Ä¢ –î–æ—Å—Ç—É–ø –∫ GPT-4\n"
#         "‚Ä¢ –ë–∞–∑–∞ –∏–∑ 15 —Å—Ç–∞—Ç–µ–π"
#     )
#     await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())
#
#
# async def handle_about_inline(query):
#     """–û –±–æ—Ç–µ (inline)"""
#     message = (
#         "‚ÑπÔ∏è **–û –±–æ—Ç–µ**\n\n"
#         "AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç —Å GPT-4 –∏ RAG.\n\n"
#         "üìÖ –°–æ–∑–¥–∞–Ω: –§–µ–≤—Ä–∞–ª—å 2026\n"
#         "üîó GitHub: AIconsultant-ProNPD"
#     )
#     await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_inline_menu())
#
#
# async def handle_topic(query, callback_data):
#     """–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã"""
#     topics = {
#         "topic_registration": "üìù **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏**\n\n–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ù–ü–î.",
#         "topic_taxes": "üí∏ **–ù–∞–ª–æ–≥–∏ –∏ –ª–∏–º–∏—Ç—ã**\n\n–£–∑–Ω–∞–π—Ç–µ –æ –Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å—Ç–∞–≤–∫–∞—Ö –∏ –ª–∏–º–∏—Ç–∞—Ö –¥–æ—Ö–æ–¥–∞.",
#         "topic_reporting": "üìä **–û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å**\n\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç–∏ –∏ –ø–ª–∞—Ç–µ–∂–∞—Ö.",
#         "topic_closing": "‚ùå **–ó–∞–∫—Ä—ã—Ç–∏–µ**\n\n–ö–∞–∫ –∑–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ–≥–æ."
#     }
#
#     message = topics.get(callback_data, "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É.")
#     await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_topics_keyboard())
#
#
# async def handle_faq_question(query, callback_data):
#     """–û–±—Ä–∞–±–æ—Ç–∫–∞ FAQ –≤–æ–ø—Ä–æ—Å–æ–≤"""
#     # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≥–æ—Ç–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ FAQ
#     message = "üìù –û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å..."
#     await query.edit_message_text(message, parse_mode='Markdown', reply_markup=get_faq_keyboard())
